@namespace Theatre_TimeLine.Components

@using Theatre_TimeLine.Contracts
@using Theatre_TimeLine.Models

@inherits AddressBase

<MudTimelineItem Size="Size.Small" Color="GetColor(Address)">
    <ItemOpposite>
        <MudText Color="GetColor(Address)">@Address?.GetDisplayLocation()</MudText>
    </ItemOpposite>
    <ItemContent>
        <MudCard Outlined="true" Class="p-2">
            <MudCardContent>
                <MudText Color="GetColor(Address)" Class="align-content-center">@Address?.Title</MudText>
                <MudText Class="align-content-center">@Address?.Description</MudText>
                <MudRadioGroup @bind-Value="SelectedOption">
                    @foreach (string option in poll.Options)
                    {
                        <MudRadio Value="@option" Color="Color.Secondary">@option</MudRadio>
                    }
                </MudRadioGroup>
            </MudCardContent>

            <CascadingValue Value="Address" IsFixed="true">
                <CascadingValue Value="OnEditAddress" IsFixed="true">
                    <AddressEditMenuItem />
                </CascadingValue>
            </CascadingValue>
        </MudCard>
    </ItemContent>
</MudTimelineItem>

@code {
    private Poll poll => (this.Address as PollAddress)?.GetPoll() ?? new();

    private string SelectedOption { get; set; } = string.Empty;
}
